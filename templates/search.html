<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Результаты поиска - Наш сайт</title>
    <link rel="stylesheet" href="/static/search.css">

</head>
<body>
    <header class="header">
        <div class="container" onclick="window.location.href='/project'">
            <h1>Назад</h1>
        </div>
    </header>

    <div class="container">
        <!-- Форма поиска -->
        <form class="search-form" action="/search" method="GET">
    <input type="hidden" name="category" value="{{ category }}">
    <input
        type="text"
        name="q"
        id="search"
        class="search-input"
        placeholder="Введите поисковый запрос..."
        value="{{ q }}"
    >
    <button type="submit" class="search-button">Найти</button>
</form>


        <!-- Информация о поиске -->
        <div class="search-info">
            Найдено <span class="results-count">{{amount}}</span> результатов по запросу
            "<span class="search-query">{{q}}</span>"
        </div>

        <!-- Основной контент с фильтрами и результатами -->
        <div class="content-wrapper">
            <!-- Сайдбар с фильтрами -->
            <aside class="sidebar">
    <div class="filters-panel">
        <h3>Фильтр</h3>

        <form action="/search" method="GET" class="select-filter-form">
            <input type="hidden" name="q" value="{{ q }}">

            <label>Категория</label>
            <select name="category" class="category-select">
                <option value="">Все категории</option>
                {% for some_category in categories %}
                <option value="{{some_category.name}}" {% if category == some_category.name %} selected {% endif %}>{{some_category.name}}</option>
                {%endfor%}
            </select>

            <button type="submit" class="apply-filters-btn">Применить</button>
            <a href="/search?q={{ q }}" class="reset-filters">Сбросить</a>
        </form>
    </div>
</aside>


            <!-- Основная область с результатами -->
            <main class="main-content">
                <!-- Список результатов -->
                <div class="results-list">
                    {% if list_of_products %}
                        {% for product in list_of_products %}
                            <div class="result-item">
                                <div class="result-title">
                                    <a href="/product/{{ product.id }}">{{ product.name }}</a>
                                </div>

                                <div class="result-url">
                                    Цена: {{ product.price }} ₽
                                </div>

                                <div class="result-snippet">
                                    {{ product.description[:120] }}...
                                </div>

                                <img src="{{ product.photo }}" alt="{{ product.name }}" style="width:150px;border-radius:6px;margin-top:10px;">
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-results">Ничего не найдено по запросу "{{ q }}"</div>
                    {% endif %}
                </div>

                <!-- Пагинация -->
                <div class="pagination">
    <a href="/search?q={{q}}&category={{category}}&page={{page - 1}}"
       class="page-button {% if page == 1 %}disabled-btn{% endif %}">← Назад</a>

    {% for current_page in range(1, amount_of_pages + 1) %}
        <a href="/search?q={{q}}&category={{category}}&page={{current_page}}"
           class="page-button {% if page==current_page %}active{% endif %}">
           {{current_page}}
        </a>
    {% endfor %}

    <a href="/search?q={{q}}&category={{category}}&page={{page + 1}}"
       class="page-button {% if (page == amount_of_pages) or (amount_of_pages == 0) %}disabled-btn{% endif %}">
       Вперед →
    </a>
</div>

            </main>
        </div>
    </div>


</body>
</html>